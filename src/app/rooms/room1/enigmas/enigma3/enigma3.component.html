<div class="enigma3-container">
  <div class="enigma-header">
    <h2>√ânigme 3 : D√©couvre la suite de chiffres</h2>
    <button class="hint-btn" (click)="toggleHint()">
      {{ showHint() ? '‚úï' : 'üí°' }} Indice
    </button>
  </div>

  @if (showHint()) {
    <div class="hint-box">
      <p>L'artiste signe toujours ses ≈ìuvres...</p>
      <p>Chaque lettre cache un nombre. L'alphabet d√©tient la cl√© !</p>
      <p>üí° A=1, B=2, C=3... et ainsi de suite</p>
    </div>
  }

  <div class="artist-reveal">
    <h3>L'artiste</h3>
    <div class="artist-name">
      <span class="name-text">Pablo</span>
      <span class="name-highlight">{{ artistName }}</span>
    </div>
  </div>

  <div class="letter-grid">
    @for (hint of letterHints(); track hint.letter + hint.position) {
      <div 
        class="letter-card"
        [class.revealed]="hint.revealed"
        (click)="revealLetter($index)"
      >
        <div class="card-front">
          <span class="letter">{{ hint.letter }}</span>
          <span class="position-hint">Lettre {{ hint.position }}</span>
        </div>
        <div class="card-back">
          <span class="value">{{ hint.value }}</span>
          <span class="explanation">{{ hint.letter }} = {{ hint.value }}</span>
        </div>
      </div>
    }
  </div>

  <div class="sequence-input-section">
    <p class="instructions">
      üî¢ Quelle est la suite de chiffres ? (s√©par√©s par des virgules)
    </p>
    
    <div class="input-group">
      <input 
        type="text" 
        [(ngModel)]="sequenceInput"
        placeholder="16,9,3,1,19,19,15"
        class="sequence-input"
        [class.error]="attemptFailed()"
        (keyup.enter)="onSequenceSubmit()"
      />
      <button 
        class="submit-btn"
        (click)="onSequenceSubmit()"
        [disabled]="!sequenceInput()"
      >
        Valider
      </button>
    </div>

    @if (attemptFailed()) {
      <div class="error-message">
        ‚ùå Ce n'est pas la bonne suite. V√©rifiez les valeurs !
      </div>
    }

    <div class="alphabet-helper">
      <p class="helper-title">Aide : Correspondance alphab√©tique</p>
      <div class="alphabet-grid">
        @for (num of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]; track num) {
          <div class="alphabet-item">
            <span class="letter">{{ String.fromCharCode(64 + num) }}</span>
            <span class="number">{{ num }}</span>
          </div>
        }
      </div>
    </div>
  </div>
</div>
